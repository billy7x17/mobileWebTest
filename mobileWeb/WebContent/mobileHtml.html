<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
	name="viewport" />
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta content="telephone=no" name="format-detection" />
<title>Mobile Web App Learning</title>
<style>
.spirit {
	position: absolute;
	width: 50px;
	height: 50px;
	background-color: red;
}
</style>
</head>
<body
	style="width: 100%; height: 100%; margin: 0; padding: 0; position: relative;">
	<div id="canvas" style="position: relative; width: 100%; height: 100%;"></div>
</body>
<script type="text/javascript">
addEventListener('load', function(){
    orientationChange();
    window.onorientationchange = orientationChange;
});

function orientationChange() {
    switch(window.orientation) {
    　　case 0:
            alert("肖像模式 0,screen-width: " + screen.width + "; screen-height:" + screen.height);
            break;
    　　case -90:
            alert("左旋 -90,screen-width: " + screen.width + "; screen-height:" + screen.height);
            break;
    　　case 90:
            alert("右旋 90,screen-width: " + screen.width + "; screen-height:" + screen.height);
            break;
    　　case 180:
        　　alert("风景模式 180,screen-width: " + screen.width + "; screen-height:" + screen.height);
        　　break;
    };
};


//define global variable

var canvas = document.getElementById("canvas"),
    spirit, startX, startY;
 // touch start listener

function touchStart(event) {
	  console.log('进入touchStart');	 
      event.preventDefault();
      if (spirit ||! event.touches.length) 
    	  spirit.remove();
      var touch = event.touches[0];
      startX = touch.pageX;
      startY = touch.pageY;
      spirit = document.createElement("div");
      spirit.className = "spirit";
      spirit.style.left = startX + 'px';
      spirit.style.top = startY + 'px';
      canvas.appendChild(spirit);
}

//add touch start listener
canvas.addEventListener("touchstart", touchStart, false);


function touchMove(event) {
	event.preventDefault();
	if (!spirit || !event.touches.length) return;
	var touch = event.touches[0],
	     x = touch.pageX - startX,
	     y = touch.pageY - startY;
	spirit.style.webkitTransform = 'translate(' + x + 'px, ' + y + 'px)';     
}
 
canvas.addEventListener("touchmove", touchMove, false);
</script>
</html>